# Android App Setup Guide

This guide explains how to set up and deploy the RPG Engine app as an Android application using Capacitor.

## Prerequisites

Before you begin, make sure you have installed:

1. **Node.js** (v18 or higher)
   - Download from: https://nodejs.org

2. **Java Development Kit (JDK)** (v11 or higher)
   - Download from: https://www.oracle.com/java/technologies/javase-downloads.html
   - Or use: `brew install openjdk@11` (macOS)

3. **Android Studio**
   - Download from: https://developer.android.com/studio
   - Install Android SDK (API level 34 recommended)

4. **Android SDK Tools**
   - Open Android Studio
   - Go to Settings > Appearance & Behavior > System Settings > Android SDK
   - Install SDK Platform 34 and Build Tools 34

## Step 1: Environment Setup

Set your environment variables:

### macOS/Linux:
\`\`\`bash
export JAVA_HOME=$(/usr/libexec/java_home)
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools:$PATH
\`\`\`

### Windows:
\`\`\`cmd
set JAVA_HOME=C:\Program Files\Java\jdk-11
set ANDROID_HOME=%USERPROFILE%\AppData\Local\Android\sdk
set PATH=%ANDROID_HOME%\tools;%ANDROID_HOME%\tools\bin;%ANDROID_HOME%\platform-tools;%PATH%
\`\`\`

## Step 2: Initialize Capacitor Android Project

\`\`\`bash
# Install Capacitor CLI if not already installed
npm install -g @capacitor/cli

# Add Android platform to your project (run once)
npm run cap:add:android
\`\`\`

## Step 3: Build the Web App

\`\`\`bash
# Build the Next.js app and export as static files
npm run build
\`\`\`

## Step 4: Sync with Android

\`\`\`bash
# Sync the web app with the Android project
npm run cap:sync
\`\`\`

## Step 5: Open in Android Studio

\`\`\`bash
# Open the Android project in Android Studio
npm run cap:open
\`\`\`

Or manually:
1. Open Android Studio
2. Select "Open an Existing Android Studio project"
3. Navigate to `android` folder in your project
4. Click "Open"

## Step 6: Build and Run

### Using Android Studio:
1. Select your target device or emulator from the device dropdown
2. Click the "Run" button (or press Shift+F10)

### Using Command Line:
\`\`\`bash
# Run on connected device or emulator
npm run android:run

# Build for release (for Google Play Store)
npm run android:build
\`\`\`

## Step 7: Deploy to Google Play Store

### Prerequisites:
- Create a Google Play Developer account: https://play.google.com/apps/publish
- Pay the $25 registration fee

### Process:
1. In Android Studio, go to Build > Generate Signed Bundle / APK
2. Select "Android App Bundle" (recommended for Play Store)
3. Create or select a signing key
4. Build the bundle
5. Upload to Google Play Console

## Troubleshooting

### Build Errors
- Clear Gradle cache: `./gradlew clean`
- Rebuild: `./gradlew build`

### Capacitor Sync Issues
- Re-run: `npm run cap:sync`
- Clear plugin cache: `rm -rf node_modules/@capacitor`
- Reinstall: `npm install`

### Device Not Detected
- Enable USB Debugging on your Android device
- Restart ADB: `adb kill-server && adb start-server`

### App Won't Load
- Check logcat: `adb logcat`
- Clear app cache: `adb shell pm clear com.rpgengine.app`
- Reinstall app: `adb uninstall com.rpgengine.app`

## Project Structure

\`\`\`
your-project/
├── android/                 # Capacitor Android project
├── out/                     # Built web app (generated by npm run build)
├── app/                     # Next.js app
├── components/              # React components
├── lib/                     # Utilities
├── capacitor.config.json    # Capacitor configuration
└── package.json             # Dependencies
\`\`\`

## Features

The Android app includes:
- Native splash screen
- Status bar customization
- Hardware back button handling
- Keyboard accessory bar
- Offline support via PWA
- All web app features and AI integrations

## Useful Commands

\`\`\`bash
# Development
npm run dev              # Run web dev server
npm run build            # Build web app for Android
npm run android          # Build and open in Android Studio

# Capacitor
npm run cap:sync         # Sync web app to Android
npm run cap:open         # Open Android Studio
npm run android:run      # Run on device/emulator
npm run android:build    # Build for release

# Debugging
adb logcat               # View device logs
adb devices              # List connected devices
\`\`\`

## Support

For issues or questions:
- Capacitor Docs: https://capacitorjs.com
- Android Docs: https://developer.android.com
- GitHub Issues: Create an issue in the repository
